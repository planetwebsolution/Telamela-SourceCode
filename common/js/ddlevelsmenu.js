if(typeof dd_domreadycheck=="undefined"){var dd_domreadycheck=false}var ddlevelsmenu={enableshim:true,arrowpointers:{downarrow:[SITE_ROOT_URL+"common/images/arrow-down.gif",11,7],rightarrow:[SITE_ROOT_URL+"common/images/arrow-right.gif",12,12],showarrow:{toplevel:true,sublevel:true}},hideinterval:200,effects:{enableswipe:true,enableslide:true,enablefade:true,duration:200},httpsiframesrc:"blank.htm",topmenuids:[],topitems:{},subuls:{},lastactivesubul:{},topitemsindex:-1,ulindex:-1,hidetimers:{},shimadded:false,nonFF:!/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent),ismobile:navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i)!=null,getoffset:function(b,a){return(b.offsetParent)?b[a]+this.getoffset(b.offsetParent,a):b[a]},getoffsetof:function(a){a._offsets={left:this.getoffset(a,"offsetLeft"),top:this.getoffset(a,"offsetTop")}},getwindowsize:function(){this.docwidth=window.innerWidth?window.innerWidth-10:this.standardbody.clientWidth-10;this.docheight=window.innerHeight?window.innerHeight-15:this.standardbody.clientHeight-18},gettopitemsdimensions:function(){for(var a=0;a<this.topmenuids.length;a++){var d=this.topmenuids[a];for(var b=0;b<this.topitems[d].length;b++){var e=this.topitems[d][b];var c=document.getElementById(e.getAttribute("rel"));e._dimensions={w:e.offsetWidth,h:e.offsetHeight,submenuw:c.offsetWidth,submenuh:c.offsetHeight}}}},isContained:function(a,b){var b=window.event||b;var d=b.relatedTarget||((b.type=="mouseover")?b.fromElement:b.toElement);while(d&&d!=a){try{d=d.parentNode}catch(b){d=a}}if(d==a){return true}else{return false}},addpointer:function(d,f,a,c){var e=document.createElement("img");e.src=a[0];e.style.width=a[1]+"px";e.style.height=a[2]+"px";if(f=="rightarrowpointer"){e.style.left=d.offsetWidth-a[2]-2+"px"}e.className=f;var b=d.childNodes[d.firstChild.nodeType!=1?1:0];if(b&&b.tagName=="SPAN"){d=b}if(c=="before"){d.insertBefore(e,d.firstChild)}else{d.appendChild(e)}},css:function(b,a,c){var d=new RegExp("(^|\\s+)"+a+"($|\\s+)","ig");if(c=="check"){return d.test(b.className)}else{if(c=="remove"){b.className=b.className.replace(d,"")}else{if(c=="add"&&!d.test(b.className)){b.className+=" "+a}}}},addshimmy:function(b){var c=(!window.opera)?document.createElement("iframe"):document.createElement("div");c.className="ddiframeshim";c.setAttribute("src",location.protocol=="https:"?this.httpsiframesrc:"about:blank");c.setAttribute("frameborder","0");b.appendChild(c);try{c.style.filter="progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)"}catch(a){}return c},positionshim:function(g,c,a,f,e){if(g._istoplevel){var e=window.pageYOffset?window.pageYOffset:this.standardbody.scrollTop;var d=g._offsets.top-e;var b=e+this.docheight-g._offsets.top-g._dimensions.h;if(d>0){this.shimmy.topshim.style.left=f+"px";this.shimmy.topshim.style.top=e+"px";this.shimmy.topshim.style.width="99%";this.shimmy.topshim.style.height=d+"px"}if(b>0){this.shimmy.bottomshim.style.left=f+"px";this.shimmy.bottomshim.style.top=g._offsets.top+g._dimensions.h+"px";this.shimmy.bottomshim.style.width="99%";this.shimmy.bottomshim.style.height=b+"px"}}},hideshim:function(){this.shimmy.topshim.style.width=this.shimmy.bottomshim.style.width=0;this.shimmy.topshim.style.height=this.shimmy.bottomshim.style.height=0},buildmenu:function(d,f,c,e,a,b){f._master=d;f._pos=e;f._istoplevel=a;if(a){this.addEvent(f,function(g){ddlevelsmenu.hidemenu(ddlevelsmenu.subuls[this._master][parseInt(this._pos)].parentNode)},"click")}this.subuls[d][e]=c;f._dimensions={w:f.offsetWidth,h:f.offsetHeight,submenuw:c.offsetWidth,submenuh:c.offsetHeight};this.getoffsetof(f);c.parentNode.style.left=0;c.parentNode.style.top=0;c.parentNode.style.visibility="hidden";c.style.visibility="hidden";this.addEvent(f,function(j){if(ddlevelsmenu.ismobile||!ddlevelsmenu.isContained(this,j)){var h=ddlevelsmenu.subuls[this._master][parseInt(this._pos)];if(this._istoplevel){ddlevelsmenu.css(this,"selected","add");clearTimeout(ddlevelsmenu.hidetimers[this._master][this._pos])}ddlevelsmenu.getoffsetof(f);var l=window.pageXOffset?window.pageXOffset:ddlevelsmenu.standardbody.scrollLeft;var i=window.pageYOffset?window.pageYOffset:ddlevelsmenu.standardbody.scrollTop;var n=this._offsets.left+this._dimensions.submenuw+(this._istoplevel&&b=="topbar"?0:this._dimensions.w);var g=this._offsets.top+this._dimensions.submenuh;var m=(this._istoplevel?this._offsets.left+(b=="sidebar"?this._dimensions.w:0):this._dimensions.w);if(n-l>ddlevelsmenu.docwidth){m+=-this._dimensions.submenuw+(this._istoplevel&&b=="topbar"?this._dimensions.w:-this._dimensions.w)}if(m==0){m=$(this).find("a").width()+10}h.parentNode.style.left=m+"px";var k=(this._istoplevel?this._offsets.top+(b=="sidebar"?0:this._dimensions.h):this.offsetTop);if(g-i>ddlevelsmenu.docheight){if(this._dimensions.submenuh<this._offsets.top+(b=="sidebar"?this._dimensions.h:0)-i){k+=-this._dimensions.submenuh+(this._istoplevel&&b=="topbar"?-this._dimensions.h:this._dimensions.h)}else{k+=-(this._offsets.top-i)+(this._istoplevel&&b=="topbar"?-this._dimensions.h:0)}}h.parentNode.style.top=k+"px";if(ddlevelsmenu.enableshim&&(ddlevelsmenu.effects.enableswipe==false||ddlevelsmenu.nonFF)){ddlevelsmenu.positionshim(f,h,b,l,i)}else{h.FFscrollInfo={x:l,y:i}}ddlevelsmenu.showmenu(f,h,b);if(!ddlevelsmenu.ismobile){if(j.preventDefault){j.preventDefault()}if(j.stopPropagation){j.stopPropagation()}}else{if(f._istoplevel||j.target.parentNode.getElementsByTagName("ul").length>0){j.preventDefault();j.stopPropagation()}}}},(this.ismobile)?"click":"mouseover");this.addEvent(f,function(h){var g=ddlevelsmenu.subuls[this._master][parseInt(this._pos)];if(this._istoplevel){if(!ddlevelsmenu.isContained(this,h)&&!ddlevelsmenu.isContained(g.parentNode,h)){ddlevelsmenu.hidemenu(g.parentNode)}}else{if(!this._istoplevel&&!ddlevelsmenu.isContained(this,h)){ddlevelsmenu.hidemenu(g.parentNode)}}},"mouseout")},setopacity:function(a,b){a.style.opacity=b;if(typeof a.style.opacity!="string"){a.style.MozOpacity=b;try{if(a.filters){a.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+b*100+")"}}catch(c){}}},showmenu:function(d,b,a){if(this.effects.enableswipe||this.effects.enablefade){if(this.effects.enableswipe){var c=(d._istoplevel&&a=="topbar")?d._dimensions.submenuh:d._dimensions.submenuw;b.parentNode.style.width=b.parentNode.style.height=0;b.parentNode.style.overflow="hidden"}if(this.effects.enablefade){b.parentNode.style.width=b.offsetWidth+"px";b.parentNode.style.height=b.offsetHeight+"px";this.setopacity(b.parentNode,0)}b._curanimatedegree=0;b.parentNode.style.visibility="visible";b.style.visibility="visible";clearInterval(b._animatetimer);b._starttime=new Date().getTime();b._animatetimer=setInterval(function(){ddlevelsmenu.revealmenu(d,b,c,a)},10)}else{b.parentNode.style.visibility="visible";b.style.visibility="visible"}},revealmenu:function(e,c,d,b){var a=new Date().getTime()-c._starttime;if(a<this.effects.duration){if(this.effects.enableswipe){if(c._curanimatedegree==0){c.parentNode.style[e._istoplevel&&b=="topbar"?"width":"height"]=(e._istoplevel&&b=="topbar"?c.offsetWidth:c.offsetHeight)+"px"}c.parentNode.style[e._istoplevel&&b=="topbar"?"height":"width"]=(c._curanimatedegree*d)+"px";if(this.effects.enableslide){c.style[e._istoplevel&&b=="topbar"?"top":"left"]=Math.floor((c._curanimatedegree-1)*d)+"px"}}if(this.effects.enablefade){this.setopacity(c.parentNode,c._curanimatedegree)}}else{clearInterval(c._animatetimer);if(this.effects.enableswipe){c.parentNode.style.width=c.offsetWidth+"px";c.parentNode.style.height=c.offsetHeight+"px";c.parentNode.style.overflow="visible";if(this.effects.enableslide){c.style.top=0;c.style.left=0}}if(this.effects.enablefade){this.setopacity(c.parentNode,1);c.parentNode.style.filter=""}if(this.enableshim&&c.FFscrollInfo){this.positionshim(e,c,b,c.FFscrollInfo.x,c.FFscrollInfo.y)}}c._curanimatedegree=(1-Math.cos((a/this.effects.duration)*Math.PI))/2},hidemenu:function(a){if(typeof a._pos!="undefined"){this.css(this.topitems[a._master][parseInt(a._pos)],"selected","remove");if(this.enableshim){this.hideshim()}}clearInterval(a.firstChild._animatetimer);a.style.left=0;a.style.top="-1000px";a.style.visibility="hidden";a.firstChild.style.visibility="hidden"},addEvent:function(b,c,a){if(b.addEventListener){b.addEventListener(a,c,false)}else{if(b.attachEvent){b.attachEvent("on"+a,function(){return c.call(b,window.event)})}}},domready:function(a){if(dd_domreadycheck){a();return}if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);a();dd_domreadycheck=true},false)}else{if(document.attachEvent){if(document.documentElement.doScroll&&window==window.top){(function(){if(dd_domreadycheck){a();return}try{document.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}a();dd_domreadycheck=true})()}}}if(document.attachEvent&&parent.length>0){this.addEvent(window,function(){a()},"load")}},init:function(b,g){this.standardbody=(document.compatMode=="CSS1Compat")?document.documentElement:document.body;this.topitemsindex=-1;this.ulindex=-1;this.topmenuids.push(b);this.topitems[b]=[];this.subuls[b]=[];this.hidetimers[b]=[];this.enableshim=(this.ismobile)?false:this.enableshim;if(this.enableshim&&!this.shimadded){this.shimmy={};this.shimmy.topshim=this.addshimmy(document.body);this.shimmy.bottomshim=this.addshimmy(document.body);this.shimadded=true}var n=document.getElementById(b);var d=n.getElementsByTagName("a");var f=[];var m=b=="ddsidemenubar"?"ddsubmenustyleside":"ddsubmenustyle";this.getwindowsize();for(var j=0;j<d.length;j++){if(d[j].getAttribute("rel")){this.topitemsindex++;this.ulindex++;var p=d[j];this.topitems[b][this.topitemsindex]=p;var q=document.getElementById(p.getAttribute("rel"));var e=document.createElement("div");e.className=m;q.removeAttribute("class");e.appendChild(q);document.body.appendChild(e);f.push(e);e.style.zIndex=2000;e._master=b;e._pos=this.topitemsindex;this.addEvent(e,function(c){c.stopPropagation();c.cancelBubble=true},"touchstart");this.addEvent(e,function(c){ddlevelsmenu.hidemenu(this)},"click");var r=(g=="sidebar")?"rightarrowpointer":"downarrowpointer";var k=(g=="sidebar")?this.arrowpointers.rightarrow:this.arrowpointers.downarrow;if(this.arrowpointers.showarrow.toplevel){this.buildmenu(b,p,q,this.ulindex,true,g)}e.onmouseover=function(){clearTimeout(ddlevelsmenu.hidetimers[this._master][this._pos])};this.addEvent(e,function(i){if(!ddlevelsmenu.isContained(this,i)&&!ddlevelsmenu.isContained(ddlevelsmenu.topitems[this._master][parseInt(this._pos)],i)){var c=this;if(ddlevelsmenu.enableshim){ddlevelsmenu.hideshim()}ddlevelsmenu.hidetimers[this._master][this._pos]=setTimeout(function(){ddlevelsmenu.hidemenu(c)},ddlevelsmenu.hideinterval)}},"mouseout");var h=q.getElementsByTagName("ul");for(var o=0;o<h.length;o++){this.ulindex++;var a=h[o].parentNode;var l=document.createElement("div");l.appendChild(h[o]);a.appendChild(l);if(this.arrowpointers.showarrow.sublevel){if(b!="ddsidemenubar"){this.addpointer(a.getElementsByTagName("a")[0],"rightarrowpointer",this.arrowpointers.rightarrow,"before")}}this.buildmenu(b,a,h[o],this.ulindex,false,g)}}}this.addEvent(window,function(){ddlevelsmenu.getwindowsize();ddlevelsmenu.gettopitemsdimensions()},"resize");if(this.ismobile){this.addEvent(document,function(s){for(var c=0;c<f.length;c++){ddlevelsmenu.hidemenu(f[c])}},"touchstart")}},setup:function(b,a){this.domready(function(){ddlevelsmenu.init(b,a)})}};
